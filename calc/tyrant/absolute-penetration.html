<html>
    <head>
        <script src="https://volkova-rom.github.io/rom-calc/scripts/common-formula.js"></script>
        <script src="https://volkova-rom.github.io/rom-calc/scripts/tyrant/absolute-penetration.js"></script>
    </head>
    <body>
        <h2>Somewhat accurate Absolute Penetration damage calculator for PVP</h2>

        <p>&nbsp;</p>

        <label id="comp_tier1" hidden>0</label>
        <label id="comp_tier2" hidden>0</label>
        <label id="comp_tier3" hidden>0</label>
        <label id="comp_tier4" hidden>0</label>
        <label id="comp_tier5" hidden>0</label>
        <span id="comp_status-dmg-mod" hidden>1</span>

        <table id="tier1-table" border="1">
            <tr>
                <td colspan="6">Tier 1</td>
            </tr>
            <tr align="center">
                <td rowspan="2">PATK</td>
                <td rowspan="2">Weapon Size Penalty</td>
                <td colspan="2">Medium Dmg Incr/Decr</td>
            </tr>
            <tr align="center">
                <td>Dmg Inc to Medium</td>
                <td>Dmg Reduc from Medium</td>
            </tr>
            <tr>
                <td>
                    <input id="i_patk" type="number" min="1" max="999999" value="12500"></input>
                </td>
                <td>
                    <select id="i_weap-penalty">
                        <option selected value="1">100%</option>
                        <option value="0.75">75%</option>
                        <option value="0.50">50%</option>
                        <option value="0.25">25%</option>
                    </select>
                </td>
                <td>
                    <input id="i_size-inc" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_size-dec" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
            </tr>
            <tr align="center">
                <td><span class="dup_patk">&nbsp;</span></td>
                <td><span id="comp_weap-penalty">&nbsp;</span></td>
                <td colspan="2"><span id="comp_size-mod"></span></td>
            </tr>
            <tr>
                <td colspan="3">Innate Element</td>
                <td rowspan="2">Damage Increase to Element</td>
                <td colspan="2">Element</td>
            </tr>
            <tr>
                <td>Attacking Element</td>
                <td>Enemy Element</td>
                <td>Additional Element Rate</td>
                <td>Element ATK</td>
                <td>Element DEF</td>
            </tr>
            <tr>
                <td>
                    <select id="i_attacker-elem">
                        <option selected value="neutral">Neutral</option>
                        <option value="earth">Earth</option>
                        <option value="fire">Fire</option>
                        <option value="water">Water</option>
                        <option value="wind">Wind</option>
                        <option value="holy">Holy</option>
                        <option value="dark">Shadow</option>
                        <option value="ghost">Ghost</option>
                        <option value="poison">Poison</option>
                    </select>
                </td>
                <td>
                    <select id="i_defender-elem">
                        <option selected value="neutral">Neutral</option>
                        <option value="earth">Earth</option>
                        <option value="fire">Fire</option>
                        <option value="water">Water</option>
                        <option value="wind">Wind</option>
                        <option value="holy">Holy</option>
                        <option value="dark">Shadow</option>
                        <option value="ghost">Ghost</option>
                        <option value="poison">Poison</option>
                        <option value="undead">Undead</option>
                    </select>
                </td>
                <td>
                    <input type="checkbox" id="i_has-lov"></input> <label for="i_has-lov">Attacker has LOV?</label> <br />
                    <input type="checkbox" id="i_has-snowy-owl"></input> <label for="i_has-snowy-owl">Attacker has Snowy Owl?</label> <br />
                    <input type="checkbox" id="i_has-divine-carver"></input> <label for="i_has-divine-carver">Defender has Divine Carver?</label>
                </td>
                <td>
                    <input id="i_elem-inc" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_elem-atk" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_elem-def" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
            </tr>
            <tr align="center">
                <td colspan="3"><span id="comp_elem-rate"></span></td>
                <td><span id="comp_elem-inc">&nbsp;</span></td>
                <td colspan="2"><span id="comp_elem-mod"></span></td>
            </tr>
            <tr align="center">
                <td colspan="5"><span id="display_tier1" style="font-weight: bold;">&nbsp;</span></td>
                <td><input type="button" onClick="update_all()" value="Update"></input></td>
            </tr>
        </table>

        <p> &nbsp;</p>

        <table id="tier2-table" border="1">
            <tr>
                <td colspan="8">Tier 2</td>
            </tr>
            <tr align="center">
                <td colspan="3">Attacker stats</td>
                <td rowspan="2">MATK</td>
                <td colspan="2">Demihuman Damage</td>
                <td colspan="2">PVP Damage</td>
            </tr>
            <tr align="center">
                <td>DEX</td>
                <td>STR</td>
                <td>LUK</td>
                <td>Dmg Inc to Demihuman</td>
                <td>Dmg Reduc from Demihuman</td>
                <td>Dmg Inc to Players</td>
                <td>Dmg Reduc from Players</td>
            </tr>
            <tr>
                <td>
                    <input id="i_attacker-dex" type="number" min="1" max="999" value="240"></input>
                </td>
                <td>
                    <input id="i_attacker-str" type="number" min="1" max="999" value="159"></input>
                </td>
                <td>
                    <input id="i_attacker-luk" type="number" min="1" max="999" value="159"></input>
                </td>
                <td>
                    <input id="i_matk" type="number" min="1" max="999999" value="3000"></input>
                </td>
                <td>
                    <input id="i_race-inc" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_race-dec" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_pvp-inc" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_pvp-dec" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
            </tr>
            <tr align="center">
                <td colspan="3"><span id="comp_attacker-stats">&nbsp;</span></td>
                <td><span class="dup_matk"></span></td>
                <td colspan="2"><span id="comp_race-mod">&nbsp;</span></td>
                <td colspan="2"><span id="comp_pvp-mod">&nbsp;</span></td>
            </tr>
            <tr align="center">
                <td colspan="7"><span id="display_tier2" style="font-weight: bold;"></span></td>
                <td><input type="button" onClick="update_all()" value="Update"></input></td>
            </tr>
        </table>

        <p>&nbsp;</p>

        <table id="tier3-table" border="1">
            <tr>
                <td colspan="9">Tier 3</td>
            </tr>
            <tr align="center">
                <td rowspan="2">LUK Bonus</td>
                <td colspan="4">Defense</td>
                <td colspan="4">Physical</td>
            </tr>
            <tr align="center">
                <td>Ignore DEF</td>
                <td>Enemy VIT</td>
                <td>Enemy raw DEF</td>
                <td>Enemy DEF%</td>
                <td>Refine Levels</td>
                <td>Penetration</td>
                <td>Damage Reduction</td>
                <td>Enemy Skill Buffs</td>
            </tr>
            <tr>
                <td>
                    <input id="i_luk-passive-lvl" type="number" min="1" max="5" value="5"></input>
                </td>
                <td>
                    <input id="i_ig-def" type="number" step="0.1" min="0" max="999" value="100.00"></input>%
                </td>
                <td>
                    <input id="i_defender-vit" type="number" min="1" max="999" value="240"></input>
                </td>
                <td>
                    <input id="i_defender-raw-def" type="number" min="1" max="99999" value="2000"></input>
                </td>
                <td>
                    <input id="i_defender-def-per" type="number" step="0.1" min="0" max="999" value="30.00"></input>%
                </td>
                <td>
                    Weapon Refine Lvl: <input id="i_weapon-refine" type="number" min="0" max="16" value="15"></input> <br />
                    Acce1 Refine Lvl: <input id="i_acce1-refine" type="number" min="0" max="16" value="15"></input> <br />
                    Acce2 Refine Lvl: <input id="i_acce2-refine" type="number" min="0" max="16" value="15"></input>
                </td>
                <td>
                    <input id="i_phys-pen" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_dam-reduc" type="number" step="0.1" min="0" max="250" value="0.00"></input>%
                </td>
                <td>
                    <input type="checkbox" id="i_has-energy-coat"></input> Has Energy Coat? (of Wiz/Sage) <br />
                    <input type="checkbox" id="i_has-heart-of-steel"></input> Has Heart of Steel? (of Knight) <br />
                    <input type="checkbox" id="i_has-selfless-shield"></input> Has Selfless Shield? (from Crusader) <br />
                    <input type="checkbox" id="i_has-vanished"></input> Has Vanished? (of Stalker) <br />
                    <input type="checkbox" id="i_has-epiclesis"></input> Has Epiclesis? (from Priest) <br />
                    <input type="checkbox" id="i_has-near-death-awaken"></input> Has Near Death Awaken? (of Shura) <br />
                </td>
                <tr align="center">
                    <td><span id="comp_luk-bonus">&nbsp;</span></td>
                    <td colspan="4"><span id="comp_def-mod">&nbsp;</span></td>
                    <td colspan="4"><span id="comp_phys-mod">&nbsp;</span></td>
                </tr>
                <tr align="center">
                    <td colspan="8"><span id="display_tier3" style="font-weight: bold;"></span></td>
                    <td><input type="button" onClick="update_all()" value="Update"></input></td>
                </tr>
            </tr>
        </table>

        <p> &nbsp;</p>

        <table id="tier4-table" border="1">
            <tr>
                <td colspan="5">Tier 4</td>
            </tr>
            <tr align="center">
                <td rowspan="2">Refine ATK</td>
                <td rowspan="2">Enemy Refine Reduct</td>
                <td colspan="2">Ranged Damage</td>
            </tr>
            <tr align="center">
                <td>PDI</td>
                <td>Ranged Damage Reduct</td>
            </tr>
            <tr>
                <td>
                    <input id="i_refine-atk" type="number" min="1" max="9999" value="1200"></input>
                </td>
                <td>
                    Enemy Offhand Refine: <input id="i_defender_offhand-refine" type="number" min="0" max="16" value="15"></input> <br />
                    Enemy Armor Refine: <input id="i_defender_armor-refine" type="number" min="0" max="16" value="15"></input> <br />
                    Enemy Garment Refine: <input id="i_defender_garment-refine" type="number" min="0" max="16" value="15"></input> <br />
                    Enemy Shoes Refine: <input id="i_defender_shoes-refine" type="number" min="0" max="16" value="15"></input> <br />
                </td>
                <td>
                    <input id="i_pdi" type="number" step="0.1" min="0" max="999" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_range-reduct" type="number" step="0.1" min="0" max="999" value="0.00"></input>%
                </td>
            </tr>
            <tr align="center">
                <td><span class="dup_refine-atk">&nbsp;</td>
                <td><span id="comp_refine-reduct">&nbsp;</td>
                <td colspan="2"><span id="comp_range-mod">&nbsp;</span></td>
            </tr>
            <tr align="center">
                <td colspan="7">Absolute Penetration Skill Modifiers</td>
            </tr>
            <tr align="center">
                <td>Crackshot Lvl</td>
                <td>Absolute Penetration Lvl</td>
                <td>Assault Terminator</td>
                <td>Crackshot Aesir Runes</td>
                <td>Boost from Enemy Defense</td>
                <td>Distance in metres</td>
                <td>Charging time in seconds</td>
            </tr>
            <tr>
                <td>
                    <input id="i_crackshot-lvl" type="number" min="1" max="20" value="20"></input>
                </td>
                <td>
                    <input id="i_abs-pen-lvl" type="number" min="1" max="10" value="10"></input>
                </td>
                <td><span id="comp_assault-term-mod">&nbsp;</spanid></td>
                <td>
                    <select id="i_aesir-mod">
                        <option selected value="0.35">7</option>
                        <option value="0.30">6</option>
                        <option value="0.25">5</option>
                        <option value="0.20">4</option>
                        <option value="0.15">3</option>
                        <option value="0.10">2</option>
                        <option value="0.05">1</option>
                        <option value="0.00">N/A</option>
                    </select>
                </td>
                <td><span id="comp_def-bonus-mod">&nbsp;</spanid></td>
                <td>
                    <input id="i_distance-metres" type="number" min="1" max="20" value="10"></input>
                </td>
                <td>
                    <input id="i_charging-time" type="number" min="1" max="5" value="0"></input>
                </td>
            </tr>
            <tr align="center">
                <td colspan="5"><span id="comp_abs-pen-mod">&nbsp;</span></td>
            </tr>
            <tr>
                <td>Enemy VIT</td>
            </tr>
            <tr>
                <td align="center">
                    <span class="dup_defender-vit">240</span>
                </td>
            </tr>
            <tr align="center">
                <td colspan="4"><span id="display_tier4" style="font-weight: bold;"></span></td>
                <td><input type="button" onClick="update_all()" value="Update"></input></td>
            </tr>
        </table>

        <p>&nbsp;</p>
        <table id="tier5-table" border="1">
            <tr>
                <td colspan="5">Tier 5</td>
            </tr>
            <tr align="center">
                <td colspan="2">True Skill Damage</td>
                <td colspan="2">Skill Damage</td>
                <td rowspan="2">Final Damage Increase</td>
            </tr>
            <tr align="center">
                <td>Monoculars</td>
                <td>Guild Prayer True Skill Damage</td>
                <td>Skill Dmg Inc</td>
                <td>Skill Dmg Reduct</td>
            </tr>
            <tr>
                <td>
                    <span>Has Monoculars?</span> 
                    <select id="i_monocular-refine">
                        <option selected value="0">None</option>
                        <option value="0.15">+1</option>
                        <option value="0.2">+2</option>
                        <option value="0.25">+3</option>
                        <option value="0.30">+4</option>
                        <option value="0.35">+5</option>
                        <option value="0.40">+6 and up</option>
                    </select>
                </td>
                <td>
                    <input id="i_guild-prayer_true-skill" type="number" min="0" max="10" value="0"></input>
                </td>
                <td>
                    <input id="i_skill-dmg-inc" type="number" step="0.1" min="0" max="999" value="0.00"></input>%
                </td>
                <td>
                    <input id="i_skill-dmg-reduct" type="number" step="0.1" min="0" max="999" value="0.00"></input>%
                </td>
                <td>
                    <span>Is LOD equipped?</span>
                    <select id="i_lod-count">
                        <option selected value="0">None</option>
                        <option value="0.20">1</option>
                        <option value="0.40">2</option>
                    </select>
                    <br />
                    <span>Is LOD deposited?</span>
                    <input type="checkbox" id="i_has-lod-depo"></input>
                    <br />
                    <span>Is Chimera-star equipped?</span>
                    <input type="checkbox" id="i_has-chimera-star"></input>
                    <br />
                    <span>Is Chimera-star deposited?</span>
                    <input type="checkbox" id="i_has-chimera-star-depo"></input>
                    <br />
                    <span>Has Gluttonious Imp?</span>
                    <input type="checkbox" id="i_has-glut-imp"></input>
                    <br />
                    <span>Has Cyborg Bunny?</span>
                    <input type="checkbox" id="i_has-cyborg-bunny"></input>
                    <br />
                    <span>Remaining HP?</span>
                    <input id="i_remaining-hp-per" type="number" step="0.1" min="0.1" max="99.99" value="100.00"></input>%
                    <br />
                    <span>Has Love Goddess?</span>
                    <input type="checkbox" id="i_has-love-goddess"></input>
                    <br />
                    <span>Has Wind Perchdrake?</span>
                    <input type="checkbox" id="i_has-wind-perch-drake"></input>
                    <br />
                    <span>Has Master Tackler?</span>
                    <select id="i_master-tackler-lvl">
                        <option selected value="0">None</option>
                        <option value="1">Lv 1</option>
                        <option value="2">Lv 2</option>
                        <option value="3">Lv 3</option>
                        <option value="4">Lv 4</option>
                    </select>
                    <br />
                    <span>Chess or orb holder?</span>
                    <select id="i_chess-orb">
                        <option selected value="">N/A</option>
                        <option value="chess">Chess Piece</option>
                        <option value="orb">Orb Holder</option>
                    </select>
                    <br />
                    <span>Number of statuses afflicted: </span>
                    <input id="i_status-afflicted-count" type="number" min="0" max="12" value="0"></input>
                    <br />
                    <span>Has Ore Spirit?</span>
                    <input type="checkbox" id="i_has-ore-spirit"></input>
                    <br />
                    <span>Has activated Chaotic Blade</span>
                    <input type="checkbox" id="i_has-chaotic-blade"></input>
                    <br />
                    <span>War Ender Artifact Buff</span>
                    <select id="i_war-ender-artifact">
                        <option selected value="0">None</option>
                        <option value="0.30">Tier 2</option>
                        <option value="0.50">Tier 3</option>
                    </select>
                    <br />
                    <span>Mysteltainn Artifact Buff</span>
                    <select id="i_mysteltainn-artifact">
                        <option selected value="0">None</option>
                        <option value="0.30">Tier 2</option>
                        <option value="0.60">Tier 3</option>
                    </select>
                    <br />
                </td>
            </tr>
            <tr align="center">
                <td colspan="2"><span id="comp_true-dmg">&nbsp;</span></td>
                <td colspan="2"><span id="comp_skill-dmg-mod">&nbsp;</span></td>
                <td><span id="comp_final-dmg-mod">&nbsp;</span></td>
            </tr>
            <tr align="center">
                <td colspan="5">Statuses</td>
            </tr>
            <tr align="center">
                <td>Poison <input type="checkbox" id="i_under-poison"></input></td>
                <td>Stun <input type="checkbox" id="i_under-stun"></input></td>
                <td>Freeze <input type="checkbox" id="i_under-freeze"></input></td>
                <td>Bleed <input type="checkbox" id="i_under-bleed"></input></td>
            </tr>
            <tr>
                <td>
                    <span>Has Flower Demon Valley Lily?</span>
                    <input type="checkbox" id="i_has-poison-tail"></input>
                    <br />
                </td>
                <td>
                    <span>Has Orc Hero depo combo?</span>
                    <input type="checkbox" id="i_has-orc-hero-depo-combo"></input>
                    <br />
                    <span>Has Thunder Kabuto?</span>
                    <input type="checkbox" id="i_has-thunder-kabuto"></input>
                    <br />
                    <span>Is Rotar Zairo star equipped?</span>
                    <select id="i_rotar-zairo-star-count">
                        <option selected value="0">None</option>
                        <option value="0.10">1</option>
                        <option value="0.20">2</option>
                    </select>
                    <br />
                </td>
                <td>
                    <span>Has Marina depo combo?</span>
                    <input type="checkbox" id="i_has-marina-depo-combo"></input>
                    <br />
                    <span>Has Garm depo combo?</span>
                    <input type="checkbox" id="i_has-garm-depo-combo"></input>
                    <br />
                    <span>Has Stormy Knight and Undead SK combo?</span>
                    <input type="checkbox" id="i_has-stormy-knight-combo"></input>
                    <br />
                </td>
                <td>
                    <span>Has Moonlight Swing?</span>
                    <input type="checkbox" id="i_has-moonlight-swing"></input>
                    <br />
                </td>
            </tr>
            <tr align="center">
                <td>Fear <input type="checkbox" id="i_under-fear"></input></td>
                <td>Curse <input type="checkbox" id="i_under-curse"></input></td>
                <td>Silence <input type="checkbox" id="i_under-silence"></input></td>
                <td>Darkness <input type="checkbox" id="i_under-darkness"></input></td>
            </tr>
            <tr>
                <td align="center" colspan="4">
                    <span>Is Cursed Hand equipped on Acce1?</span>
                    <input type="checkbox" id="i_cursed-hand_acce1"></input>
                    <br />
                    <span>Is Cursed Hand equipped on Acce2?</span>
                    <input type="checkbox" id="i_cursed-hand_acce2"></input>
                </td>
            </tr>
            <tr align="center">
                <td colspan="5"><span class="dup_status-dmg-mod">&nbsp;</span></td>
            </tr>
            
            <tr align="center">
                <td colspan="4"><span id="display_tier5" style="font-weight: bold;"></span></td>
                <td><input type="button" onClick="update_all()" value="Update"></input></td>
            </tr>
        </table>

        <p>&nbsp;</p>
        <table border="1" style="font-size: 2.4em;">
            <tr>
                <td colspan="2">
                    Final computation
                </td>
                <td colspan="4">
                    <span class="dup_tier5">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                </td>
            </tr>
            <tr>
                <td>Damage Source</td>
                <td>Percentage</td>
            </tr>
            <tr>
                <td>PATK</td>
                <td><span id="ratio_patk"></span></td>
            </tr>
            <tr>
                <td>Stat ATK</td>
                <td><span id="ratio_stat-atk"></span></td>
            </tr>
            <tr>
                <td>MATK</td>
                <td><span id="ratio_matk"></span></td>
            </tr>
            <tr>
                <td>LUK Bonus</td>
                <td><span id="ratio_luk-bonus"></span></td>
            </tr>
            <tr>
                <td>Refine ATK</td>
                <td><span id="ratio_refine-atk"></span></td>
            </tr>
            <tr>
                <td>True Damage</td>
                <td><span id="ratio_true-dmg"></span></td>
            </tr>
        </table>
    </body>
</html>
